@startuml
ユーザー-> webサーバー:中古商品検索
webサーバー-> DBサーバー:中古商品検索
DBサーバー-> DBサーバー:中古商品検索処理
DBサーバー-> webサーバー:中古商品検索結果
webサーバー-> ユーザー:中古商品検索結果
alt 登録成功
webサーバー-> ユーザー:検索成功メッセージ
else 登録失敗
webサーバー-> ユーザー:検索失敗メッセージ
end
opt 未登録
ユーザー-> webサーバー:ユーザー登録
webサーバー-> DBサーバー:ユーザー登録
DBサーバー-> DBサーバー:登録処理
DBサーバー-> webサーバー:登録結果
alt 登録成功
webサーバー-> ユーザー:登録成功メッセージ
else 登録失敗
webサーバー-> ユーザー:登録失敗メッセージ
end
end
ユーザー-> webサーバー:ログイン
webサーバー-> DBサーバー:ログイン照会
DBサーバー-> DBサーバー:ログイン処理
DBサーバー-> webサーバー:認証結果
webサーバー-> ユーザー:認証結果

activate ユーザー

alt 認証成功
webサーバー-> ユーザー:ユーザー名を表示
else 認証失敗
webサーバー-> ユーザー:失敗メッセージを表示
end
opt ログイン中
ユーザー-> webサーバー:中古商品追加
webサーバー-> DBサーバー:中古商品追加
DBサーバー-> DBサーバー:追加処理
DBサーバー-> webサーバー:追加結果
alt 追加成功
webサーバー-> ユーザー:追加成功メッセージ
else 追加失敗
webサーバー-> ユーザー:追加失敗メッセージ
end
end

opt ログイン中
ユーザー-> webサーバー:カート確認
webサーバー-> DBサーバー:カート確認
DBサーバー-> DBサーバー:カート処理
DBサーバー-> webサーバー:カート結果
webサーバー-> ユーザー:カート結果
end
opt ログイン中
ユーザー-> webサーバー:登録情報確認
webサーバー-> DBサーバー:登録情報確認
DBサーバー-> DBサーバー:登録情報確認処理
DBサーバー-> webサーバー:登録情報確認結果
webサーバー-> ユーザー:登録情報確認結果
end
opt ログイン中
ユーザー-> webサーバー:ログアウト
webサーバー-> DBサーバー:ログアウト照会
DBサーバー-> DBサーバー:ログアウト処理
DBサーバー-> webサーバー:ログアウト結果
webサーバー-> ユーザー:ログアウト結果
end


deactivate ユーザー
@enduml
